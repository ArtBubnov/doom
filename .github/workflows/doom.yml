#this scenario will be executed in case of creation of a Pull Request
name: pull request logic



  

on:
  push:
    #PR target branch is: 
    branches:
      - 'main**'


jobs:
  doom:
    name: doom
    runs-on: ubuntu-latest
    steps:

      - name: --- System Step 0 ---. Checkout repo
        uses: actions/checkout@v3
        with:
          fetch-depth: 0



      - name: --- System Step 3 ---. run JEST tests
        run: |
            echo "TEST"
            ls -a
            cd src && make
    #        wget https://archive.org/download/2020_03_22_DOOM/DOOM%20WADs/Doom%20%28v1.9%29%20%28Demo%29.zip && unzip Doom\ \(v1.9\)\ \(Demo\).zip -d ~/doom-ascii/doom-ascii/
    #        sudo ln -s ~/doom-ascii/doom-ascii/doom-ascii /usr/bin/doom-ascii
    #        doom-ascii

#      - name:  --- System Step 4 ---. sfdx-lwc-jest install
#        run: |
#          npm install @salesforce/sfdx-lwc-jest --save-dev
#          npm -version

#      - name: --- System Step 4 ---. JEST run
#        run: node ./node_modules/@salesforce/sfdx-lwc-jest/bin/sfdx-lwc-jest

#  pre_deploy_logic:
#    name: pre_deploy_logic
#    environment: dev
#    runs-on: ubuntu-latest
#    steps:

#      - name: --- System Step 0 ---. Checkout repo
#        uses: actions/checkout@v3
#        with:
#          fetch-depth: 0


#      - name: --- System Step 1 ---. Salesforce CLI install
#        uses: sfdx-actions/setup-sfdx@v1


#      - name: --- Global Step 0. Logger ---
#        run: |
#          chmod +x ./build/ci_cd_external_functions.sh
#          source ./build/ci_cd_external_functions.sh && logger


#      - name: --- Global Step 1. Salesforce login ---
#        run: |
#          chmod +x ./build/ci_cd_external_functions.sh
#          source ./build/ci_cd_external_functions.sh && login_to_SF_org

          
#      - name: --- Global Step 2. Get destractive meta list ---
#        run: |
#          chmod +x ./build/ci_cd_external_functions.sh
#          source ./build/ci_cd_external_functions.sh && get_destructive_changes


#      - name: --- Global Step 4. Get positive meta list ---
#        run: |
#          chmod +x ./build/ci_cd_external_functions.sh
#          source ./build/ci_cd_external_functions.sh && get_positive_changes


#      - name: --- Global Step 5. Get apex tests list ---
#        run: |
#          chmod +x ./build/ci_cd_external_functions.sh
#          source ./build/ci_cd_external_functions.sh && get_apex_tests_list







#      - name: --- Global Step 3. Deploy destructive changes without saving ---
#        run: |
#          chmod +x ./build/ci_cd_external_functions.sh
#          source ./build/ci_cd_external_functions.sh && get_destructive_changes


          

#source ./build/ci_cd_external_functions.sh && login_to_SF_org_full_version1
         